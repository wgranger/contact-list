(this["webpackJsonpcontact-list"]=this["webpackJsonpcontact-list"]||[]).push([[0],{22:function(e,t,n){e.exports=n(49)},27:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(19),l=n.n(r),o=(n(27),n(7)),u=n.n(o),i=n(20),s=n(3),m=n(4),d=n(5);function f(e){var t=e.activeRows,n=e.setActiveRows,a=e.rows,r=t.length===a.length,l=function(){n(r?[]:a)},o=c.a.useRef(null);if(o&&o.current){var u=o.current;r?u.indeterminate=!1:0===t.length?u.indeterminate=!1:u.indeterminate=!0}return c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,c.a.createElement("input",{checked:r,id:"checkAll",name:"checkAll",onChange:l,onKeyDown:function(e){"Enter"===e.key&&l()},ref:o,type:"checkbox"}),c.a.createElement("label",{htmlFor:"checkAll"},"contact")),c.a.createElement("th",null,"total value"),c.a.createElement("th",null,"location"),c.a.createElement("th",null,"deals"),c.a.createElement("th",null,"tags"),c.a.createElement("th",null,c.a.createElement(m.a,{icon:d.b}))))}function E(e){var t=e.name,n=t&&t.split(" ").map((function(e){return e[0]}));return c.a.createElement("div",{className:"avatar"},c.a.createElement("span",null,n))}function v(e){var t=e.visible,n=c.a.useState(!1),a=Object(s.a)(n,2),r=a[0],l=a[1],o=c.a.useState("Email"),u=Object(s.a)(o,2),i=u[0],f=u[1],E=c.a.useRef(null),v=function(e){l(!1),f(e)};function p(e){27===e.keyCode&&l(!1)}function h(e){var t=e.target,n=E&&E.current;n&&!n.contains(t)&&l(!1)}return c.a.useEffect((function(){return window.addEventListener("keyup",p),window.addEventListener("click",h),function(){window.removeEventListener("keyup",p),window.removeEventListener("click",h)}}),[]),c.a.createElement("div",{className:"row-controls",style:{visibility:t?"visible":"collapse"}},c.a.createElement("button",{className:"row-controls__label",onClick:function(e){e.stopPropagation(),l(!r)},ref:E},c.a.createElement("div",null,c.a.createElement("span",null,i)),c.a.createElement(m.a,{icon:d.a})),r&&c.a.createElement("div",{className:"row-controls__dropdown"},c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return v("Edit")}},"Edit"),c.a.createElement("button",{onClick:function(){return v("Email")}},"Email"),c.a.createElement("button",{onClick:function(){return v("Call")},onBlur:function(){return l(!1)}},"Call"))))}function p(e){var t=e.activeRows,n=e.setActiveRows,a=e.row,r=t.includes(a),l=function(e){var c=t.slice();if(r){var l=c.indexOf(a);c.splice(l,1)}else c.push(a);n(c)};return c.a.createElement("tr",{onClick:l},c.a.createElement("td",null,c.a.createElement("div",{className:"contacts-table__contact"},c.a.createElement("input",{type:"checkbox",checked:r,id:a.contact,name:a.contact,onChange:l,onKeyDown:function(e){"Enter"===e.key&&l()}}),c.a.createElement("label",{htmlFor:a.contact},c.a.createElement(E,{name:a.contact})),c.a.createElement("span",null,a.contact))),c.a.createElement("td",null,"$".concat(a.value.toLocaleString())),c.a.createElement("td",null,a.location),c.a.createElement("td",null,a.deals),c.a.createElement("td",null,a.tags&&a.tags.join(", ").toString()),c.a.createElement("td",null,c.a.createElement(v,{visible:r})))}function h(e){var t=e.contacts,n=c.a.useState([]),a=Object(s.a)(n,2),r=a[0],l=a[1];return c.a.createElement("table",{className:"contacts-table"},c.a.createElement(f,{activeRows:r,setActiveRows:l,rows:t}),c.a.createElement("tbody",null,function(e,t,n){return n.map((function(n,a){return c.a.createElement(p,{key:"TABLE_ROW_".concat(a),activeRows:e,setActiveRows:t,row:n})}))}(r,l,t)))}function b(e){var t=e.message,n=void 0===t?"Unable to process request, please refresh the page":t,a=e.toggleBanner;return(c.a.createElement("div",{className:"error-banner"},c.a.createElement("div",null,c.a.createElement(m.a,{icon:d.c}),c.a.createElement("span",null,n)),c.a.createElement("div",null,c.a.createElement("button",{onClick:function(){return a(!1)}},c.a.createElement(m.a,{icon:d.d})))))}var w=n(21),g=n.n(w);function k(){var e={url:"https://stormy-plateau-51405.herokuapp.com/https://sahmed93846.api-us1.com/api/3/contacts?include=deals,contactTags.tag,contactLists.list",method:"GET",headers:{"Api-Token":"bcd062dedabcd0f1ac8a568cdcf58660c44d7e79b91763cc1a5d0c03d52c522d851fceb0","Content-Type":"application/json;charset=UTF-8"}};return g()(e).then((function(e){return e})).catch((function(e){return console.log(e),e}))}function y(e,t){return t.filter((function(t){return t.contact===e}))}function C(e,t){var n=y(e,t).map((function(e){return function(e,t){switch(e){case"aud":t*=.71;break;case"eur":t*=1.15;break;default:t*=1}return t}(e.currency,e.value)}));if(!n.length)return 0;var a=n.reduce((function(e,t){return e+t})).toFixed(2);return parseInt(a)}function R(e){var t=e.city,n=e.state,a=e.country;return t&&n&&a?"".concat(t,", ").concat(n,", ").concat(a):""}function A(e,t,n){for(var a=t.filter((function(t){return t.contact===e})).map((function(e){return e.tag})),c=[],r=0;r<n.length;r++){var l=n[r];a.includes(l.id)&&c.push(l.tag)}return c}function N(e){var t=[];if(!e)return t;var n=e.contacts,a=e.contactTags,c=e.deals,r=e.tags;return n&&(t=n.map((function(e){return{contact:"".concat(e.firstName," ").concat(e.lastName),value:C(e.id,c),location:R(e),deals:y(e.id,c).length,tags:A(e.id,a,r)}}))),t}var j=function(){var e=c.a.useState(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=c.a.useState([]),l=Object(s.a)(r,2),o=l[0],m=l[1];return c.a.useEffect((function(){(function(){var e=Object(i.a)(u.a.mark((function e(){var t,n,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:t=e.sent,(n=null===t||void 0===t?void 0:t.data)?(c=N(n),m(c)):a(!0);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),c.a.createElement("div",{className:"App"},n&&c.a.createElement(b,{toggleBanner:a}),c.a.createElement(h,{contacts:o}))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(j,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.864be864.chunk.js.map